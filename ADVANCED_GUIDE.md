# 低功耗蓝牙信号优化系统 - 高级版使用指南

## 🎯 系统概述

本系统完整实现了**低功耗蓝牙芯片信号接收优化方法**，通过可视化界面展示从信号采集到优化输出的完整流程。

---

## 🚀 快速启动

### 方法1：使用启动脚本（推荐）

```bash
cd /Users/fuwei/ble_smartlit
./run_advanced.sh
```

### 方法2：使用 uv 命令

```bash
cd /Users/fuwei/ble_smartlit
uv run streamlit run streamlit_app_advanced.py
```

### 方法3：直接运行

```bash
cd /Users/fuwei/ble_smartlit
streamlit run streamlit_app_advanced.py --server.port 8502
```

启动后，在浏览器中访问：**http://localhost:8502**

---

## 📊 系统功能特点

### 🔹 完整优化流程（8个步骤）

系统按照专利技术实现了完整的优化流程：

#### **步骤1：射频前端数据采集**
- 多通道信号强度采集
- 噪声功率测量
- 多径干扰检测
- 实时SNR计算

#### **步骤2：动态特征矩阵构建**
- 滑动窗口分割（50样本/窗口）
- 时空关联矩阵计算
- PCA降维处理
- 特征可视化

#### **步骤3：注意力滤波策略选择**
- 多头注意力权重计算
- 动态策略评分
- 最优策略选择
- 权重分布可视化

#### **步骤4：自适应滤波处理**
- 时域滤波（可变窗口）
- 频域变换处理
- 时频联合优化
- 信号重构

#### **步骤5：深度残差网络增强**
- 分段加窗处理
- 多尺度特征提取
- 跨层特征融合
- 信号增强输出

#### **步骤6：多维质量评估**
- 误码率(BER)计算
- 信噪比(SNR)评估
- 相位一致性分析
- 3D质量矩阵生成

#### **步骤7：动态参数调整**
- 异常点检测
- 参数偏差分析
- 调整指令生成
- 参数优化建议

#### **步骤8：预测性参数优化**
- 环境趋势预测
- 参数映射建立
- 最优配置预测
- 自适应调整

---

## 🎨 界面功能说明

### 右侧控制面板

- **📊 测试参数**
  - 信号采集时长：0.05-0.5秒
  - 初始信号强度：-90到-60 dBm
  - 环境噪声等级：1-10级

- **🚀 操作按钮**
  - `▶️ 开始完整优化`：自动执行全部8个步骤
  - `👣 逐步执行`：手动控制每一步，观察详细过程

- **📈 系统状态**
  - 实时显示当前执行状态
  - 步骤完成进度

### 主显示区域

#### **系统简介页面**
- 核心技术介绍
- 优化流程图示
- 各步骤说明

#### **优化执行页面**
- 实时流程进度条
- 步骤状态卡片
- 动态更新显示

#### **结果分析页面**
- **性能指标对比**（4个关键指标）
  - 误码率改善百分比
  - 信噪比提升(dB)
  - 相位一致性得分
  - 综合改善率

- **信号波形对比**（4组图表）
  - 原始信号波形
  - 优化后信号波形
  - 频谱对比分析
  - 质量指标趋势

- **性能指标详细对比表**
  - 误码率(BER)
  - 信噪比(SNR)
  - 相位一致性
  - 多径抑制能力
  - 处理延迟

- **注意力权重分布**
  - 各特征维度权重
  - 重要性可视化

- **参数优化建议**
  - 当前配置 vs 优化配置
  - 调整幅度说明

---

## 📈 使用场景

### 场景1：完整性能评估
```
1. 设置测试参数
2. 点击"开始完整优化"
3. 等待自动执行完成
4. 查看完整性能对比报告
```

### 场景2：算法流程学习
```
1. 点击"逐步执行"
2. 依次点击执行每个步骤
3. 观察每步的处理效果
4. 理解算法工作原理
```

### 场景3：参数调优
```
1. 调整右侧控制面板参数
2. 运行优化流程
3. 对比不同参数下的效果
4. 找到最优参数组合
```

---

## 🔍 性能指标说明

### 误码率 (BER - Bit Error Rate)
- **定义**：接收错误比特数/总比特数
- **典型改善**：从 0.15 降至 0.03（80%改善）
- **意义**：越低表示通信可靠性越高

### 信噪比 (SNR - Signal-to-Noise Ratio)
- **定义**：信号功率/噪声功率（dB）
- **典型提升**：+8 到 +15 dB
- **意义**：越高表示信号质量越好

### 相位一致性
- **定义**：信号相位稳定性度量
- **典型提升**：从 0.65 提升到 0.88
- **意义**：越接近1表示相位越稳定

### 多径抑制
- **定义**：抑制多径干扰的能力
- **效果**：从"较差"改善到"优秀"
- **意义**：减少信号失真

---

## 💡 技术亮点

### 1. 注意力机制可视化
- 实时显示各环境特征的重要性权重
- 直观了解模型决策依据

### 2. 多尺度对比分析
- 时域、频域多角度对比
- 全面评估优化效果

### 3. 预测性优化
- 根据环境趋势预测参数
- 主动适应环境变化

### 4. 实时性能监控
- 动态更新优化进度
- 即时反馈处理结果

---

## 🛠️ 故障排除

### 问题1：无法启动应用
**解决方案**：
```bash
# 检查是否在正确目录
pwd  # 应显示 /Users/fuwei/ble_smartlit

# 确认文件存在
ls streamlit_app_advanced.py

# 重新安装依赖
uv sync
```

### 问题2：端口被占用
**解决方案**：
```bash
# 停止现有进程
pkill -f streamlit

# 或使用其他端口
uv run streamlit run streamlit_app_advanced.py --server.port 8503
```

### 问题3：图表显示异常
**解决方案**：
- 刷新浏览器页面
- 清除浏览器缓存
- 尝试使用Chrome浏览器

---

## 📝 版本信息

- **系统版本**：v2.0 Advanced
- **创建日期**：2025-11-05
- **Python版本**：3.12+
- **主要依赖**：
  - streamlit >= 1.28
  - plotly >= 5.0
  - numpy >= 1.24
  - pandas >= 2.0
  - scikit-learn >= 1.3

---

## 🎓 学习资源

### 相关论文
- 基于注意力机制的信号处理
- 深度残差网络在信号增强中的应用
- 自适应滤波算法研究

### 代码文件
- `streamlit_app_advanced.py`：主程序
- `bluetooth_optimization/`：核心算法实现
- `adaptive-ble-receiver/`：信号处理模块

---

## 🤝 技术支持

如有问题或建议，请联系项目团队。

---

**祝你使用愉快！**🎉
